extends layout

block content
  .inner
    h1= title
    #chatWindow.chat__window
      each message in chat.messages
        -const isCurrentUser = user.id === message.user.id;
        .chat__message(class=(isCurrentUser ? 'chat__message--self': ''))
          img.chat__avatar(src=(message.user.photo.startsWith('http') ? message.user.photo : `/uploads/users/${message.user.photo}`))
          span.chat__name(class=(isCurrentUser ? 'chat__name--self': ''))= isCurrentUser ? 'Me': message.user.name
          p.chat__content= message.content
    input(type="hidden" name="channelId" value=chat.id)
    form#messageForm.form(action="POST")
      label.label Your Message
        input.input(name="message" autocomplete="off")
      button.button(type="submit") Send